<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generates simulations of expected mortality by simulating the model coefficients. — sim • attrib</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Generates simulations of expected mortality by simulating the model coefficients. — sim" />
<meta property="og:description" content="With the given fit from fit_attrib the function sim, from package arm, is used to generate 500 simulations
of all the coefficients, from there respective posterior distributions.
This is then used to compute the expected response for all simulations and rows in the input dataset." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">attrib</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2021.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/intro.html">Introduction to Attrib</a>
    </li>
    <li>
      <a href="../articles/nowcast.html">Nowcasting with Attrib</a>
    </li>
    <li>
      <a href="../articles/statistical_properties.html">Statistical properties used in Attrib</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/folkehelseinstituttet/attrib/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generates simulations of expected mortality by simulating the model coefficients.</h1>
    <small class="dont-index">Source: <a href='https://github.com/folkehelseinstituttet/attrib/blob/master/R/sim.R'><code>R/sim.R</code></a></small>
    <div class="hidden name"><code>sim.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>With the given fit from fit_attrib the function sim, from package arm, is used to generate 500 simulations
of all the coefficients, from there respective posterior distributions.
This is then used to compute the expected response for all simulations and rows in the input dataset.</p>
    </div>

    <pre class="usage"><span class='fu'>sim</span><span class='op'>(</span><span class='va'>fit</span>, <span class='va'>data</span>, <span class='va'>n_sim</span>, PI <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>fit</th>
      <td><p>A model fit created by fit_attrib</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>The data with either observed values or reference values.</p></td>
    </tr>
    <tr>
      <th>n_sim</th>
      <td><p>Number of simulations</p></td>
    </tr>
    <tr>
      <th>PI</th>
      <td><p>Returns a draw from the quasipoisson distribution with the calculated mean as mean. If false the exponential of the mean is returned.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A dataset with 500 simulations of the expected response for each row in the original dataset.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code><a href='../articles/intro.html'>vignette("intro", package="attrib")</a></code></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='va'>response</span> <span class='op'>&lt;-</span> <span class='st'>"deaths"</span>
<span class='va'>fixef</span> <span class='op'>&lt;-</span> <span class='st'>"pr100_ili_lag_1 + sin(2 * pi * (week - 1) / 52) + cos(2 * pi * (week - 1) / 52)"</span>
<span class='va'>ranef</span> <span class='op'>&lt;-</span> <span class='st'>" (pr100_ili_lag_1| season)"</span>
<span class='va'>offset</span> <span class='op'>&lt;-</span> <span class='st'>"log(pop)"</span>

<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'>attrib</span><span class='fu'>::</span><span class='va'><a href='data_fake_nation.html'>data_fake_nation</a></span>

<span class='va'>fit</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fit_attrib.html'>fit_attrib</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>data</span>, response <span class='op'>=</span> <span class='va'>response</span>, fixef <span class='op'>=</span> <span class='va'>fixef</span>, ranef <span class='op'>=</span> <span class='va'>ranef</span>, offset <span class='op'>=</span> <span class='va'>offset</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>boundary (singular) fit: see ?isSingular</span></div><div class='input'>
<span class='va'>n_sim</span> <span class='op'>&lt;-</span> <span class='fl'>5</span>
<span class='fu'>sim</span><span class='op'>(</span><span class='va'>fit</span>, <span class='va'>data</span>, <span class='va'>n_sim</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       week    season year    yrwk    x location_code     pop pr100_ili
#&gt;    1:    1 2009/2010 2010 2010-01 24.0         norge 5367580  1.160403
#&gt;    2:    1 2010/2011 2011 2011-01 24.0         norge 5367580  1.164511
#&gt;    3:    1 2011/2012 2012 2012-01 24.0         norge 5367580  1.472767
#&gt;    4:    1 2012/2013 2013 2013-01 24.0         norge 5367580  1.435822
#&gt;    5:    1 2013/2014 2014 2014-01 24.0         norge 5367580  1.402403
#&gt;   ---                                                                 
#&gt; 2866:   52 2017/2018 2017 2017-52 23.0         norge 5367580  1.270134
#&gt; 2867:   52 2018/2019 2018 2018-52 23.0         norge 5367580  1.028794
#&gt; 2868:   52 2019/2020 2019 2019-52 23.0         norge 5367580  1.236302
#&gt; 2869:   53 2009/2010 2009 2009-53 23.5         norge 5367580  1.100072
#&gt; 2870:   53 2015/2016 2015 2015-53 23.5         norge 5367580  1.269054
#&gt;       pr100_ili_lag_1 temperature_high deaths id_row sim_id sim_value
#&gt;    1:       1.1000719                0    891      1      1  899.6451
#&gt;    2:       0.9623231                0    874      2      1  887.7409
#&gt;    3:       1.3356371                0    854      3      1  912.2060
#&gt;    4:       1.2320998                0    885      4      1  907.7964
#&gt;    5:       1.2514772                0    904      5      1  901.3637
#&gt;   ---                                                                
#&gt; 2866:       1.0938242                0    854    570      5  908.0504
#&gt; 2867:       0.8534488                0    893    571      5  885.1736
#&gt; 2868:       1.0609100                0    829    572      5  899.4894
#&gt; 2869:       1.0387242                0    880    573      5  895.6281
#&gt; 2870:       1.1645116                0    912    574      5  896.8174</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Richard Aubrey White, Aurora Christine Hofman.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


